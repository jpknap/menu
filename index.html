<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/jquery-2.0.3.js"></script>
<script type="text/javascript" src="js/jquery.gomap-1.3.2.min.js"></script>
<script type="text/javascript" src="js/map_funciones.js"></script>
<style>
#map {
    width:700px;
    height: 400px;
    margin: 0 auto 0 auto;
}
</style>
	<script>
    function coordenadasCiudad(){
        //var data=document.getElementById("buscaCiudad");
       var data = $("#buscaCiudad").val();

        //var ciudadJSON = JSON.stringify(data);
        //console.log(ciudadJSON);
 
        // Realizamos la petición al servidor
        $.post('php/getCoorCiudad.php', {ciudad:data}, centrarMapa
            //console.log(respuesta);
            //alert(respuesta.longitud);
            //map.panTo(new google.maps.LatLng(respuesta.latitud, respuesta.longitud));

            //aqui hacer los cambios en interfaz

      ).error(
               function(){
               console.log('Error al ejecutar la petición');   
        });
        $.getJSON('php/caragar_rest.php', {ciudad:data} ,process_contatcs);

   

    }
    function process_contatcs(data){
                var info_html = '<option> </option>';
                console.log(data);               
                 $.each(data, function(name , info){

                    info_html += "<option value="+info.latitud+","+info.longitud+">"+info.nombre+"</option>";

                
               });
                $('#rest').html(info_html);
            }
    function centrarMapa(data){
        $.each(data, function(name , info){
          
            map.panTo(new google.maps.LatLng(info.latitud , info.longitud ));
        });

    }

	</script>

</head>
    <form role="form">
        <div class="form-group">
            <label for="buscaCiudad">Ciudad</label>
            <input type="Ciudad" class="form-control" id="buscaCiudad" placeholder="Ingrese la ciudad que desee revisar">
            <select id="rest" onchange="puntos_rest(this)"> 
          
            </select>   
        </div>
    </form>
    <button id="buscador" type="submit" class="btn btn-default" onclick= "coordenadasCiudad();">Buscar</button>
<body>

	<div id="map">
	</div>

</body>

</html>

